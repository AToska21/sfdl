name: SFDL

on: push

jobs:
    build-sfdl:
        runs-on: ubuntu-22.04
        steps:
            - uses: actions/checkout@v2
            - name: build toolchain container
              run: docker build . -t builder
            - uses: ammaraskar/gcc-problem-matcher@master
            - name: build sfdl
              run: |
                docker build . -t builder
                docker run --rm -v ${PWD}:/project builder make
            - uses: actions/upload-artifact@master
              with:
                  name: sfdl
                  path: "*.rpx"
            - uses: actions/upload-artifact@master
              with:
                  name: sfdl-pp
                  path: "*.wuhb"
